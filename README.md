# ROOTExamples
Example analysis codes using CERN ROOT (https://root.cern.ch/)

## RDataFrameAnalysis
This example shows how to build a stand alone program processing ROOT trees with your self-defined classes using RDataFrameAnalysis.
RDataFrame provides a modern interface
and multi-threading for the analysis of TTree (and other data formats).
This approach is recommended since PROOF is outdated.

### TreeGen
This program generates sample tree data with two random Gaussian numbers
stored in data1_ and data2_ of ExampleTwoDataClass objects.
It demonstrates how to
 - fill your own class objects to a ROOT TTree using RDataFrame
 - generate a ROOT dictionary
 - build a shared library with CMake.
example.root file will be generated by running this program. 

### RDataFrameAnalysis
This program processes the sample tree generated by the TreeGen program using RDataFrame.
There are two functions defined in the program.
 - exampleFunction is where you can define how to process the input data stored in your own class and return output also as your custom class.
 - exampleCut is an example function defining a cut on the tree. You can implement any logic here to make a selection as you like.

It demonstrates how to
- read and write user defined class objects from/to a tree using RDataFrame
- create histograms
- apply a cut and count the number of events in the cut
- write the tree object to a file.

Modify kNWorkers in the code for multi-processing.
output.root will be generated by running this program.


## ProofTreeAnalysis
*Note: PROOF is no longer in active development. Consider using RDataFrame for
multi-threaded TTree analysis.*

This example shows how to build a stand alone program processing ROOT trees using the parallel ROOT facility, PROOF.
The TSelector class is generally used as a framework for this kind of analysis but it is often called from a ROOT commandline session or a ROOT macro. Building a stand alone project with cmake like this example enables you to develop your own Selector using an IDE and a debugger. This example is designed to be used as a template for students who are going to write their own Selector class.

### FillGaus
This program generates a sample tree data with random Gaussian events stored in ExampleDataClass objects.
It shows how to fill your own class objects to a ROOT tree, generate a ROOT dictionary, and build a shared library.

### ProofTreeAnalysis
This program processes the sample tree generated by the FillGaus program using TSelector class which is a framework for analyzing tree data provided in ROOT.
The ExampleSelector is derived from the TSelector class, processes the input tree data, and fills it to a histogram and a new tree.
It shows how to
- start PROOF processes from a stand alone program.
- pass arguments (parameters) to PROOF workers dynamically in the program.
- write a histogram or a tree object to a file.

It can run on PROOF or as a local process. Disable PROOF to debug your Selector.

## Installation
```
mkdir build
cd build
cmake ..
make install
```
You can use the "module" command to load paths
```
module use -a [install_dir]/share/modulefiles
module load ROOTExamples
```
or simply
```
source [install_dir]/share/setup.sh
```
For Visual Studio 2019 users, clone this repository from [File]->[Clone or checkout code] and add a configuration "Linux-Debug" for building on a remote machine or "WSL-Debug" for your local Windows Subsystem for Linux. Then, [Build]->[install ROOTExamples] to install.

## Usage
To run the programs, simply execute the binaries
```
TreeGen
RDataFrameAnalysis
```
or
```
FillGaus
ProofTreeAnalysis
```

## Requirements
ROOT (v6.14.00 or greater) and cmake3.


